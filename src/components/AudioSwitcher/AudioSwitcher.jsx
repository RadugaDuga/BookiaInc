import React, { useRef, useState } from "react";
import { LanguageIcon } from "../../assets/icons";
import styles from "./AudioSwitcher.module.css";
import lofiMusic from "../../assets/music/lofi.mp3";

// SVG иконка ноты
const AudioOnIcon = () => (
	<svg
		width="654"
		height="665"
		viewBox="0 0 654 665"
		fill="none"
		xmlns="http://www.w3.org/2000/svg"
	>
		<path
			d="M553.117 6H553.304C553.291 158.453 553.291 310.907 553.304 463.347C553.504 477.067 552.744 490.933 548.944 504.173C538.744 542.587 512.898 554.133 475.005 566C447.125 574.933 432.473 588.167 405.846 575.927C394.006 570.484 389.572 570.353 377.506 545.5C371.825 533.801 358.506 491.5 355.006 474C353.006 464 353.314 452.169 362.005 440C379.505 415.5 404.506 416.5 432.506 408.5C440.711 406.156 480.004 398 513.184 383.387C513.224 317.973 513.211 252.56 513.198 187.147C394.638 217.16 316.859 236.334 198.313 266.36C198.273 363.054 198.339 459.734 198.286 556.414C198.379 577.254 193.326 598.147 183.059 616.32C158.259 631.08 96.7591 659.934 64.1525 659.934C36.1538 646.553 5.05956 581.728 5.05939 550.414C5.05913 531.08 2.89233 523.227 24.759 508.08C46.2591 499.08 55.7918 495.025 82.0056 489.08C106.259 483.58 142.259 473.08 158.206 468.947C158.246 347.787 158.166 226.64 158.246 105.494C303.473 68.7469 407.931 42.88 553.117 6Z"
			fill="black"
		/>
	</svg>
);
const AudioOffIcon = () => (
	<svg
		width="654"
		height="665"
		viewBox="0 0 654 665"
		fill="none"
		xmlns="http://www.w3.org/2000/svg"
	>
		<path
			d="M37.5 40.1094C33.4229 36.9229 69.4229 5.42295 71.1003 6.50901L649.172 583.989C651 586.409 617 618.909 615.571 617.59L37.5 40.1094Z"
			fill="black"
		/>
		<path
			d="M198.31 271.569C198.276 366.192 198.338 460.803 198.286 555.414C198.379 576.254 193.326 597.147 183.059 615.32C158.259 630.08 96.7598 658.934 64.1531 658.935C36.1544 645.554 5.05951 580.729 5.05934 549.414C5.05909 530.081 2.89287 522.228 24.7595 507.081C46.2594 498.081 55.7921 494.026 82.0056 488.081C106.259 482.581 142.259 472.081 158.206 467.947C158.232 389.117 158.209 310.292 158.211 231.469L198.31 271.569Z"
			fill="black"
		/>
		<path
			d="M487.612 560.87C483.573 562.27 479.369 563.634 475.005 565.001C447.125 573.934 432.473 587.167 405.846 574.927C394.006 569.484 389.572 569.354 377.506 544.501C371.825 532.802 358.506 490.501 355.006 473.001C353.006 463.001 353.314 451.17 362.006 439.001C362.531 438.265 363.063 437.551 363.602 436.861L487.612 560.87Z"
			fill="black"
		/>
		<path
			d="M553.304 5C553.292 143.015 553.293 281.03 553.302 419.035L513.185 378.919C513.223 314.662 513.211 250.405 513.198 186.148C455.291 200.807 407.112 212.879 359.161 224.894L222.531 88.2638C336.498 59.5479 430.216 36.2194 553.118 5H553.304Z"
			fill="black"
		/>
	</svg>
);

const AudioSwitcher = () => {
	const audioRef = useRef(null);
	const [isPlaying, setIsPlaying] = useState(false);

	const handleClick = () => {
		const audio = audioRef.current;
		if (!audio) return;
		if (isPlaying) {
			audio.pause();
			setIsPlaying(false);
		} else {
			audio.play();
			setIsPlaying(true);
		}
	};

	return (
		<button
			onClick={handleClick}
			className={styles.audioSwitcher}
			aria-pressed={isPlaying}
		>
			{isPlaying ? <AudioOnIcon /> : <AudioOffIcon />}
			<audio
				ref={audioRef}
				src={lofiMusic}
				loop
				style={{ display: "none" }}
			/>
		</button>
	);
};

export default AudioSwitcher;
